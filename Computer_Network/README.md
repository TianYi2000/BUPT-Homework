本项目为《计算机网络》课程实验——DNS中继服务器

作者：胡天翼

实验环境：

- 操作系统：Windos10
- IDE：Visual Studio 2019（C）

设计一个DNS服务器程序，读入本地的“域名（域名）-IP地址”对照文件，并建立cache，当客户端查询域名对应的IP地址时，用域名检索该对照表以及本地cache，存在三种检索结果：

1、检索结果为特殊IP地址：0.0.0.0，则向客户端返回“域名不存在”的报错消息（不良网站拦截功能）；

2、检索结果为普通IP地址，则向客户返回这个地址（服务器功能）；

3、若本地列表中未检到该域名，则向外部DNS服务器发出查询请求，并将域名解析结果返回给客户端（中继功能），并将此次记录加入cache中。

##### 功能设计

1. 正常DNS服务功能：

将计算机的DNS服务器地址指向本机，当用户输入域名时，DNS服务器需要从本地存储的域名-IP对照表以及cache中进行查询，将查询到的普通IP地址返回给用户进行正常的网址访问。

2. 不良网站拦截功能：

当用户想要访问某个网站输入其域名时，DNS中继服务器需要获取其查询信息，将用户想要访问的域名与中继服务器中存储的域名-IP对应表进行对比。如果查到IP为全0，向用户返回特殊的数据包，实现不良网站屏蔽功能。

3. DNS中继功能

当DNS服务器本地存储的域名-IP对照表中没有存储用户想要访问的域名，向外部DNS服务器发出查询请求，并将查询到的结果返回给客户端。